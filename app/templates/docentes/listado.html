<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Docentes - SistPRO</title>
    <!-- CSS Principal -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
    <!-- CSS de Docentes -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/docentes.css') }}">
</head>
<body>
    <!-- Header con navegaci√≥n -->
    <header class="main-header">
        <div class="header-container">
            <div class="header-brand">
                <h1>üè´ SistPRO</h1>
                <p class="subtitle">Gesti√≥n Escolar</p>
            </div>

            <div class="header-actions">
                <div class="user-info">
                    <span class="user-name">üë§ {{ current_user.email }}</span>
                </div>
                <a href="{{ url_for('auth.logout') }}" class="btn btn-danger btn-sm">
                    üî¥ Salir
                </a>
            </div>
        </div>
    </header>

    <div class="container">
        <!-- Page Header -->
        <div class="page-header">
            <h1>üìã Lista de Docentes</h1>
            <p class="subtitle">Gesti√≥n de personal docente</p>
        </div>

        <!-- Mensajes Flash -->
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div class="alert alert-{{ category }}">
                        {{ message }}
                    </div>
                {% endfor %}
            {% endif %}
        {% endwith %}

        <!-- Barra de acciones -->
        <div class="action-bar">
            <div class="action-group">
                <a href="{{ url_for('permiso.listado') }}" class="btn btn-outline-primary">
                    üìã Ver Permisos
                </a>
            </div>
            <div class="action-group">
                <a href="{{ url_for('docente.nuevo') }}" class="btn btn-primary">
                    ‚ûï Nuevo Docente
                </a>
            </div>
        </div>

        <!-- Tabla de docentes -->
        <div class="card">
            <div class="card-body">
                {% if docentes|length == 0 %}
                    <div class="empty-state">
                        <div class="empty-icon">üë®‚Äçüè´</div>
                        <h3>No hay docentes registrados</h3>
                        <p>Comienza agregando tu primer docente</p>
                        <a href="{{ url_for('docente.nuevo') }}" class="btn btn-primary">
                            ‚ûï Registrar Docente
                        </a>
                    </div>
                {% else %}
                    <div class="table-responsive">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Nombre</th>
                                    <th>Documento</th>
                                    <th>Tel√©fono</th>
                                    <th>Email</th>
                                    <th>Estado</th>
                                    <th class="text-center">Acciones</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for docente in docentes %}
                                    <tr class="{{ 'table-inactive' if not docente.activo else '' }}">
                                        <td>
                                            <strong>{{ docente.nombre }}</strong>
                                        </td>
                                        <td>
                                            {% if docente.documento %}
                                                {{ docente.documento }}
                                            {% else %}
                                                <span class="text-muted">‚Äî</span>
                                            {% endif %}
                                        </td>
                                        <td>
                                            {% if docente.telefono %}
                                                {{ docente.telefono }}
                                            {% else %}
                                                <span class="text-muted">‚Äî</span>
                                            {% endif %}
                                        </td>
                                        <td>
                                            {% if docente.email %}
                                                {{ docente.email }}
                                            {% else %}
                                                <span class="text-muted">‚Äî</span>
                                            {% endif %}
                                        </td>
                                        <td>
                                            {% if docente.activo %}
                                                <span class="badge badge-success">Activo</span>
                                            {% else %}
                                                <span class="badge badge-secondary">Inactivo</span>
                                            {% endif %}
                                        </td>
                                        <td class="text-center">
                                            <div class="action-buttons">
                                                <a href="{{ url_for('docente.ver', id=docente.id) }}"
                                                   class="btn btn-sm btn-outline-info"
                                                   title="Ver detalle">
                                                    üëÅÔ∏è
                                                </a>
                                                <a href="{{ url_for('docente.editar', id=docente.id) }}"
                                                   class="btn btn-sm btn-outline-warning"
                                                   title="Editar">
                                                    ‚úèÔ∏è
                                                </a>
                                                <form action="{{ url_for('docente.eliminar', id=docente.id) }}"
                                                      method="POST"
                                                      class="d-inline delete-form"
                                                      onsubmit="return confirm('¬øEst√°s seguro de eliminar este docente?')">
                                                    <button type="submit" class="btn btn-sm btn-outline-danger" title="Eliminar">
                                                        üóëÔ∏è
                                                    </button>
                                                </form>
                                            </div>
                                        </td>
                                    </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>

                    <!-- Resumen -->
                    <div class="summary-stats">
                        <div class="stat-item">
                            <strong>Total:</strong> {{ docentes|length }}
                        </div>
                        <div class="stat-item">
                            <strong>Activos:</strong> {{ docentes|selectattr('activo')|list|length }}
                        </div>
                        <div class="stat-item">
                            <strong>Inactivos:</strong> {{ docentes|rejectattr('activo')|list|length }}
                        </div>
                    </div>
                {% endif %}
            </div>
        </div>

        <!-- Footer -->
        <div class="page-footer">
            <p>&copy; 2026 SistPRO - Sistema de Gesti√≥n de Permisos Escolares</p>
        </div>
    </div>
</body>
</html>